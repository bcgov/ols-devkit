<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html ><!-- InstanceBegin template="/Templates/DocTemplate.dwt" codeOutsideHTMLIsLocked="false" --> 
<head>  
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
   
    <!-- InstanceBeginEditable name="doctitle" -->
<title>Geomark Group Sign Requests - Developer Guide</title>
<!-- InstanceEndEditable -->
    
  <link href="https://code.jquery.com/ui/1.11.2/themes/cupertino/jquery-ui.css" rel="stylesheet" type="text/css" />
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
  <link href="https://cdn.datatables.net/scroller/1.2.2/css/dataTables.scroller.css" rel="stylesheet" type="text/css" />
  <link href="https://cdn.datatables.net/plug-ins/1.10.6/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css" rel="stylesheet" type="text/css" />
  <link href="css/rs.css" rel="stylesheet" type="text/css" />
  <link href="css/bcgov.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.1.min.js">
  </script>
  <script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js">
  </script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">
  </script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js">
  </script>
  <script type="text/javascript" src="https://cdn.datatables.net/scroller/1.2.2/js/dataTables.scroller.min.js">
  </script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.11/js/dataTables.bootstrap.min.js">
  </script>
  <script type="text/javascript" src="../js/rs.js">
  </script>

<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
  </head>

  <body class="nooverflow-100">
    <header class="header">
      <nav id="mainMenu" class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <div class="navbar-brand">
              <span class="navbar-brand-title">Geomark Web Service Developer Guide</span>
            </div>
          </div>
        </div>   
      </nav>
    </header>

<div class="page-content">
  <div class="container-fluid">
  
    <ol class="breadcrumb">
      <li><a href="/pub/geomark/">Geomarks</a></li>
      <li class="active">Developer Guide</li>
    </ol>
<!-- InstanceBeginEditable name="body" -->
<h1>Signing Requests
</h1>
<p>
Each request to the geomark group API must be signed using a secret key that
is specific to each geomark group. The secret key will provided by the
geomark application administrator when the geomark group is created. Each
application is responsible for ensuring that the secret key is kept private
and secure.
<p>
<p>
The signature is created by signing the request data using the the HmacSHA1
message authentication code (MAC) aglorithm and then encoding the response
using base-64 encoding.
<p>
<p>
The request data is a string that is created from the following parts joined
using the ":" character.
</p>
<dl>
<dt>Path</dt>
<dd>The path to the request as shown in the URI template with any parameters
replaced by their values (e.g.
/geomarkGroups/gm-abcdefghijklmnopqrstuvwxyz0000bc/geomarks/add).</dd>
<dt>Time</dt>
<dd>The timestamp the request was sent in the number of milliseconds since
January 1, 1970, 00:00:00 GMT. This is sent as the 'time' parameter in the
request.</dd>
<dt>Parameters</dt>
<dd>The request parameters (excluding time and signature) encoded as a HTTP
query string with the parameter names specified in alphabetical order. If a
parameter is repeated then the values must be in the same order as the
request. For example
<code>geomarkId=gm-abcdefghijklmnopqrstuvwxyz0000bc&geomarkId=gm-abcdefghijklmnopqrstuv0bcislands</code>
.</dd>
</dl>
<p>
The time and signature are sent as parameters as part of the request and are
validated by the server.
</p>
<p>
The following Java example shows how to create the signature. It is however
recommend to use the <a href="java-api/">Geomark Java
API</a> as it implements signing of requests.
</p>

<pre>
long time = System.currentTimeMillis();
String data = path + &quot;:&quot; + time + &quot;:&quot; + parameters;
SecretKey key = new SecretKeySpec(secretKey.getBytes(&quot;UTF-8&quot;), &quot;HmacSHA1&quot;);
Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);
mac.init(key);
byte[] dataBytes = data.getBytes(&quot;UTF-8&quot;);
byte[] digestBytes = mac.doFinal(dataBytes);
String signature = Base64.encode(digestBytes);
</pre>
<!-- InstanceEndEditable -->
  </div>
</div>
  
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js">
	</script>
  </body>
<!-- InstanceEnd --></html>
