<div>
  <mat-toolbar>
    <mat-toolbar-row>
      <mat-form-field floatLabel="never" appearance="standard">
        <mat-label>Search</mat-label>
        <input [formControl]="searchField" matInput>
      </mat-form-field>
      <span class="toolbar-spacer"></span>
      <button (click)="refresh()" mat-icon-button matTooltip="Refresh">
        <mat-icon>refresh</mat-icon>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <table mat-table [dataSource]="records" matSort matSortActive="GEOMARK_ID" matSortDisableClear matSortDirection="asc">
    <ng-container matColumnDef="GEOMARK_ID">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>View Geomark</th>
      <td mat-cell *matCellDef="let geomark">
        <span *ngIf="isExpired(geomark)">{{geomark.GEOMARK_ID}}</span>
        <span *ngIf="!isExpired(geomark)"><a [routerLink]="['..',geomark.GEOMARK_ID]" matTooltip="View Geomark"
            class="idLink">{{geomark.GEOMARK_ID}}</a>
          <a [routerLink]="['/geomarks',geomark.GEOMARK_ID]" mat-icon-button matTooltip="View Geomark Info" class="gci">
            <app-fa-icon name="info"></app-fa-icon>
          </a>
          <a [href]="kmlUrl(geomark.GEOMARK_ID)" mat-icon-button matTooltip="Open in Google Earth" class="gci">
            <app-fa-icon name="globe-americas"></app-fa-icon>
          </a>
          <app-copy-clipboard [text]="geomarkUrl(geomark.GEOMARK_ID)" class="gci">
          </app-copy-clipboard>
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="WHEN_CREATED">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Creation Date</th>
      <td mat-cell *matCellDef="let geomark">{{geomark.WHEN_CREATED | date: 'd-MMM-yyyy'}}</td>
    </ng-container>

    <ng-container matColumnDef="EXPIRY_DATE">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Expiry Date</th>
      <td mat-cell *matCellDef="let geomark">{{geomark.EXPIRY_DATE | date: 'd-MMM-yyyy'}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <mat-paginator [length]="resultCount" [pageSize]="pageSize"></mat-paginator>
</div>